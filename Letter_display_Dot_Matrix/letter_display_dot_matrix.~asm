ORG 0h

CODE    SEGMENT
ASSUME  CS:CODE,DS:CODE,ES:CODE,SS:CODE

PPIC_C    EQU    1EH
PPIC      EQU    1CH
PPIB      EQU    1AH
PPIA      EQU    18H

START:
MOV AX, CS
MOV DS, AX
MOV ES, AX
MOV SS, AX
MOV SP, 0FFFEh


MOV AL, 10000000B
OUT PPIC_C, AL


MOV AL, 00000000B
OUT PPIC, AL
MOV AL, 11111111B
OUT PPIB, AL

MAIN_LOOP:

MOV SI, OFFSET FONT_A
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_BLANK
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_Q
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_U
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_I
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_C
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_K
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_BLANK
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_B
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_R
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_O
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_W
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_N
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_BLANK
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_F
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_O
MOV CX, 80
CALL DISPLAY_DIGIT
MOV SI, OFFSET FONT_X
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_BLANK
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_J
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_U
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_M
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_P
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_S
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_BLANK
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_O
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_V
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_E
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_R
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_BLANK
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_A
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_BLANK
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_L
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_A
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_Z
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_Y
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_BLANK
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_D
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_O
MOV CX, 80
CALL DISPLAY_DIGIT

MOV SI, OFFSET FONT_G
MOV CX, 80
CALL DISPLAY_DIGIT



JMP MAIN_LOOP

DISPLAY_DIGIT:

PUSH CX
REFRESH_LOOP:
MOV AH, 01111111B
MOV DI, SI
MOV DX, 8

ROW_LOOP:

PUSH AX
MOV AL, 11111111B
OUT PPIB, AL


PUSH CX
MOV CX, 3
ROW_SWITCH_DELAY:
NOP
NOP
LOOP ROW_SWITCH_DELAY
POP CX
POP AX


MOV AL, [DI]
OUT PPIC, AL


PUSH CX
MOV CX, 2
STABILIZE_DELAY:
NOP
LOOP STABILIZE_DELAY
POP CX


MOV AL, AH
OUT PPIB, AL


PUSH CX
MOV CX, 15
ROW_DELAY:
NOP
NOP
NOP
NOP
NOP
LOOP ROW_DELAY
POP CX

INC DI
ROR AH, 1
DEC DX
JNZ ROW_LOOP


MOV AL, 11111111B
OUT PPIB, AL
MOV AL, 00000000B
OUT PPIC, AL

LOOP REFRESH_LOOP

POP CX
RET


FONT_A:
DB    11111100B
DB    11111110B
DB    00010001B
DB    00010001B
DB    00010001B
DB    00010001B
DB    11111110B
DB    11111100B


FONT_B:
DB    01100110B
DB    11111111B
DB    10001001B
DB    10001001B
DB    10001001B
DB    10001001B
DB    11111111B
DB    11111111B


FONT_C:
DB    00100010B
DB    01100011B
DB    10000001B
DB    10000001B
DB    10000001B
DB    10000001B
DB    01111110B
DB    00111100B


FONT_D:
DB    00111100B
DB    01111110B
DB    10000001B
DB    10000001B
DB    10000001B
DB    10000001B
DB    11111111B
DB    11111111B


FONT_E:
DB    11000011B
DB    10000001B
DB    10011001B
DB    10011001B
DB    10011001B
DB    10011001B
DB    11111111B
DB    11111111B


FONT_F:
DB    00000011B
DB    00000001B
DB    00011001B
DB    00011001B
DB    00011001B
DB    00011001B
DB    11111111B
DB    11111111B


FONT_G:
DB    00111010B
DB    01111011B
DB    10011001B
DB    10011001B
DB    10000001B
DB    10000001B
DB    01111110B
DB    00111100B


FONT_H:
DB    11111111B
DB    11111111B
DB    00011000B
DB    00011000B
DB    00011000B
DB    00011000B
DB    11111111B
DB    11111111B


FONT_I:
DB    00000000B
DB    11000011B
DB    10000001B
DB    11111111B
DB    11111111B
DB    10000001B
DB    11000011B
DB    00000000B


FONT_J:
DB    00111111B
DB    01111111B
DB    10000001B
DB    10000001B
DB    10000001B
DB    10110001B
DB    01111001B
DB    00110001B


FONT_K:
DB    10000000B
DB    11000001B
DB    01100011B
DB    00110110B
DB    00011100B
DB    00011000B
DB    11111111B
DB    11111111B



FONT_L:
DB    11100000B
DB    11000000B
DB    10000000B
DB    10000000B
DB    10000000B
DB    10000000B
DB    11111111B
DB    11111111B


FONT_M:
DB    11111111B
DB    11111111B
DB    00000010B
DB    00001100B
DB    00001100B
DB    00000010B
DB    11111111B
DB    11111111B


FONT_N:
DB    11111111B
DB    11111111B
DB    01100000B
DB    00110000B
DB    00001100B
DB    00000110B
DB    11111111B
DB    11111111B


FONT_O:
DB    00111100B
DB    01111110B
DB    10000001B
DB    10000001B
DB    10000001B
DB    10000001B
DB    01111110B
DB    00111100B


FONT_P:
DB    00000100B
DB    00001110B
DB    00010001B
DB    00010001B
DB    00010001B
DB    00010001B
DB    11111111B
DB    11111111B


FONT_Q:
DB    10111100B
DB    01111110B
DB    10100001B
DB    10010001B
DB    10000001B
DB    10000001B
DB    01111110B
DB    00111100B


FONT_R:
DB    10000110B
DB    11001001B
DB    01101001B
DB    00111001B
DB    00011001B
DB    00001001B
DB    11111111B
DB    11111111B


FONT_S:
DB    01110010B
DB    11111001B
DB    10001001B
DB    10001001B
DB    10001001B
DB    10001001B
DB    11001001B
DB    01000110B


FONT_T:
DB    00000011B
DB    00000001B
DB    00000001B
DB    11111111B
DB    11111111B
DB    00000001B
DB    00000001B
DB    00000011B


FONT_U:
DB    00111111B
DB    01111111B
DB    11000000B
DB    10000000B
DB    10000000B
DB    11000000B
DB    01111111B
DB    00111111B


FONT_V:
DB    00000011B
DB    00001111B
DB    00111100B
DB    11000000B
DB    11000000B
DB    00111100B
DB    00001111B
DB    00000011B


FONT_W:
DB    11111111B
DB    11111111B
DB    01000000B
DB    00110000B
DB    00110000B
DB    01000000B
DB    11111111B
DB    11111111B


FONT_X:
DB    10000001B
DB    11000011B
DB    01100110B
DB    00011000B
DB    00011000B
DB    01100110B
DB    11000011B
DB    10000001B


FONT_Y:
DB    00000001B
DB    00000011B
DB    00000110B
DB    11111100B
DB    11111100B
DB    00000110B
DB    00000011B
DB    00000001B


FONT_Z:
DB    11100011B
DB    11000111B
DB    10001101B
DB    10011101B
DB    10111001B
DB    10110001B
DB    11100011B
DB    11000111B


FONT_BLANK:
DB    00000000B
DB    00000000B
DB    00000000B
DB    00000000B
DB    00000000B
DB    00000000B
DB    00000000B
DB    00000000B






CODE    ENDS
END




; [SOURCE]: D:\Projects\Proteus\Peripheral_final_project.asm
